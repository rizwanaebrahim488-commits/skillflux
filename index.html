<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkillFlux | Professional Exchange</title>
    <style>
        :root {
            --brand-primary: #4f46e5; /* Modern Indigo */
            --brand-success: #10b981; /* Emerald Green */
            --bg-gradient: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            --text-main: #1f2937;
            --glass: rgba(255, 255, 255, 0.95);
        }

        body { 
            font-family: 'Inter', -apple-system, sans-serif; 
            background: var(--bg-gradient); 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh; 
            margin: 0; 
        }

        .container { 
            background: var(--glass); 
            padding: 40px; 
            border-radius: 20px; 
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); 
            width: 100%; 
            max-width: 400px; 
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        h1 { color: var(--brand-primary); font-size: 2rem; margin-bottom: 8px; font-weight: 800; }
        .tagline { color: #6b7280; font-size: 0.95rem; margin-bottom: 32px; }

        input { 
            width: 100%; padding: 14px; margin: 10px 0; 
            border: 1px solid #e5e7eb; border-radius: 12px; 
            box-sizing: border-box; font-size: 1rem; transition: border 0.2s;
        }

        input:focus { outline: none; border-color: var(--brand-primary); ring: 2px solid var(--brand-primary); }

        button { 
            width: 100%; padding: 14px; border-radius: 12px; 
            font-weight: 600; cursor: pointer; transition: all 0.2s; border: none; font-size: 1rem;
        }

        .btn-main { background: var(--brand-primary); color: white; margin-top: 10px; }
        .btn-main:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3); }

        .btn-alt { background: transparent; color: var(--brand-primary); border: 2px solid var(--brand-primary); margin-top: 12px; }
        .btn-alt:hover { background: rgba(79, 70, 229, 0.05); }

        .hidden { display: none; }

        /* Dashboard Styles */
        .credit-card { 
            background: #fff; border: 1px solid #e5e7eb; padding: 15px; 
            border-radius: 12px; margin: 20px 0; display: flex; 
            justify-content: space-between; align-items: center; 
        }
        .credit-count { font-size: 1.5rem; font-weight: 700; color: var(--brand-success); }
    </style>
</head>
<body>

    <div class="container">
        <h1>SkillFlux</h1>
        <p class="tagline">The premium peer-to-peer marketplace.</p>
        
        <div id="auth-section">
            <input type="email" id="email" placeholder="Email Address">
            <input type="password" id="password" placeholder="Create Password">
            <button onclick="handleLogin()" class="btn-main">Sign In</button>
            <button onclick="handleSignUp()" class="btn-alt">Join Community</button>
        </div>

        <div id="dashboard-section" class="hidden">
            <p>Welcome back, <strong id="user-display"></strong></p>
            <div class="credit-card">
                <span>Available Credits</span>
                <span class="credit-count" id="credit-display">0</span>
            </div>
            <button onclick="handleLogout()" style="color: #ef4444; background: transparent; font-size: 0.9rem;">Sign Out</button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
        import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCHSJX5F_mZjLqPSuofyBANQ3pC69gC14o",
            authDomain: "skillflux-c4088.firebaseapp.com",
            projectId: "skillflux-c4088",
            storageBucket: "skillflux-c4088.appspot.com",
            messagingSenderId: "347039323368",
            appId: "1:347039323368:web:0f610227dc3715581a255d"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // Logic for Login/Signup
        window.handleSignUp = async () => {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            try {
                const res = await createUserWithEmailAndPassword(auth, email, password);
                await setDoc(doc(db, "users", res.user.uid), { email, credits: 2, createdAt: new Date() });
                alert("Account created successfully!");
            } catch (e) { alert(e.message); }
        };

        window.handleLogin = () => signInWithEmailAndPassword(auth, document.getElementById('email').value, document.getElementById('password').value).catch(e => alert(e.message));
        window.handleLogout = () => signOut(auth);

        onAuthStateChanged(auth, async (user) => {
            const authDiv = document.getElementById('auth-section');
            const dashDiv = document.getElementById('dashboard-section');
            if (user) {
                authDiv.classList.add('hidden');
                dashDiv.classList.remove('hidden');
                document.getElementById('user-display').innerText = user.email.split('@')[0];
                const snap = await getDoc(doc(db, "users", user.uid));
                if (snap.exists()) document.getElementById('credit-display').innerText = snap.data().credits;
            } else {
                authDiv.classList.remove('hidden');
                dashDiv.classList.add('hidden');
            }
        });
    </script>
</body>
</html>
